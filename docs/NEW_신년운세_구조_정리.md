# 신년운세 구조 정리

## 📌 핵심 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                        사용자 입력                              │
│              생년월일시(양력) + 성별                            │
└──────────────────────────┬──────────────────────────────────────┘
                           ▼
┌─────────────────────────────────────────────────────────────────┐
│                   백엔드 로직 (코드 구현)                        │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  사주 데이터 추출 엔진                                     │  │
│  │  • 사주팔자 (년주/월주/일주/시주)                          │  │
│  │  • 십신 (정관, 편관, 정인, 편인, 비견, 겁재 등)            │  │
│  │  • 용신 / 희신 / 기신                                      │  │
│  │  • 형충회합 (형, 충, 삼합, 육합, 방합 등)                  │  │
│  │  • 대운 (현재 대운, 대운 흐름)                             │  │
│  │  • 세운 (해당 년도)                                        │  │
│  │  • 월운 (12개월)                                           │  │
│  │  • 신살 (도화살, 역마살, 화개살 등)                        │  │
│  └───────────────────────────────────────────────────────────┘  │
└──────────────────────────┬──────────────────────────────────────┘
                           ▼
              ┌────────────┴────────────┐
              ▼                         ▼
┌──────────────────────────┐  ┌──────────────────────────┐
│      무료 서비스          │  │      유료 서비스          │
│  (규칙 기반 코드 처리)    │  │    (AI API 연동)         │
├──────────────────────────┤  ├──────────────────────────┤
│                          │  │                          │
│  추출된 데이터           │  │  추출된 데이터           │
│       ▼                  │  │       ▼                  │
│  일반 공식 적용          │  │  AI 프롬프트 전달        │
│       ▼                  │  │       ▼                  │
│  【출력】                │  │  【출력】                │
│  • 총운 점수 + 한줄평    │  │  • 상세 운세 해설        │
│  • 직장운 점수 + 한줄평  │  │  • 복합적 해석           │
│  • 연애운 점수 + 한줄평  │  │  • 맞춤형 조언           │
│  • 건강운 점수 + 한줄평  │  │  • 월별 상세 분석        │
│  • 재물운 점수 + 한줄평  │  │  • 대운/세운 연계 해석   │
│  • 월별운 점수 + 한줄평  │  │  • 여러 문장의 해설      │
│                          │  │                          │
└──────────────────────────┘  └──────────────────────────┘
```

---

## 📋 요약

| 구분 | 무료 | 유료 |
|------|------|------|
| **처리 방식** | 규칙 기반 코드 | AI API 호출 |
| **입력** | 추출된 사주 데이터 | 추출된 사주 데이터 |
| **출력 형태** | 점수(1~10) + 한줄평 | 여러 문장의 상세 해설 |
| **운세 항목** | 총운, 직장, 연애, 건강, 재물, 월별 | 동일 + 심화 해석 |
| **해석 깊이** | 단순 공식 적용 | 복합적/맥락적 해석 |

---

## 🔑 핵심 포인트

1. **데이터 추출은 공통** → 코드로 100% 구현
2. **무료**: 추출 데이터 → 공식 → 점수/한줄평 (AI 불필요)
3. **유료**: 추출 데이터 → AI 프롬프트 → 상세 해설 (AI 필요)
