export interface IljuAnalysis {
  ilju: string; // 일주 (e.g., '甲子', '乙丑')
  male: IljuDetail;
  female: IljuDetail;
}

export interface IljuDetail {
  summary: string; // 한 줄 요약
  personality: string[]; // 주요 성격 특징
  strengths: string[]; // 장점
  weaknesses: string[]; // 단점/주의사항
  career: string; // 적합한 직업
  wealth: string; // 재물운
  relationships: string; // 대인관계/결혼
}

/**
 * =========================
 * 1) 60갑자 전체 목록
 * =========================
 */
export const ILJU_60: string[] = [
  '甲子', '乙丑', '丙寅', '丁卯', '戊辰', '己巳', '庚午', '辛未', '壬申', '癸酉',
  '甲戌', '乙亥', '丙子', '丁丑', '戊寅', '己卯', '庚辰', '辛巳', '壬午', '癸未',
  '甲申', '乙酉', '丙戌', '丁亥', '戊子', '己丑', '庚寅', '辛卯', '壬辰', '癸巳',
  '甲午', '乙未', '丙申', '丁酉', '戊戌', '己亥', '庚子', '辛丑', '壬寅', '癸卯',
  '甲辰', '乙巳', '丙午', '丁未', '戊申', '己酉', '庚戌', '辛亥', '壬子', '癸丑',
  '甲寅', '乙卯', '丙辰', '丁巳', '戊午', '己未', '庚申', '辛酉', '壬戌', '癸亥'
];

/**
 * =========================
 * 2) 명리 기반 룰: 기초 사전
 * =========================
 * - 지지 군(사계/기질)
 * - 천간 오행/기질
 * - (참고) 성별 문구 차이는 "표현/관계 프레이밍" 정도로만 주고,
 *   핵심 성향은 동일한 논리에서 파생되게 처리.
 */
type Element = '목' | '화' | '토' | '금' | '수';
type YinYang = '양' | '음';

const STEM_META: Record<string, { element: Element; yinyang: YinYang; keywords: string[] }> = {
  '甲': { element: '목', yinyang: '양', keywords: ['개척', '원칙', '직진', '큰그림'] },
  '乙': { element: '목', yinyang: '음', keywords: ['유연', '감각', '조율', '관계'] },
  '丙': { element: '화', yinyang: '양', keywords: ['표현', '확장', '리드', '열정'] },
  '丁': { element: '화', yinyang: '음', keywords: ['섬세', '집중', '기획', '따뜻함'] },
  '戊': { element: '토', yinyang: '양', keywords: ['책임', '버팀', '통제', '구조'] },
  '己': { element: '토', yinyang: '음', keywords: ['관리', '실리', '보살핌', '생활감'] },
  '庚': { element: '금', yinyang: '양', keywords: ['결단', '개혁', '정면승부', '기준'] },
  '辛': { element: '금', yinyang: '음', keywords: ['정교', '취향', '선별', '완성도'] },
  '壬': { element: '수', yinyang: '양', keywords: ['확장', '기회', '이동', '학습'] },
  '癸': { element: '수', yinyang: '음', keywords: ['직관', '몰입', '관찰', '비밀'] },
};

const BRANCH_META: Record<string, { element: Element; group: '자오묘유' | '인신사해' | '진술축미'; keywords: string[] }> = {
  '子': { element: '수', group: '자오묘유', keywords: ['두뇌회전', '정보', '시작', '밤기운'] },
  '午': { element: '화', group: '자오묘유', keywords: ['무대', '승부', '속도', '정면'] },
  '卯': { element: '목', group: '자오묘유', keywords: ['미감', '인연', '확산', '봄기운'] },
  '酉': { element: '금', group: '자오묘유', keywords: ['평가', '정리', '완성', '선택'] },

  '寅': { element: '목', group: '인신사해', keywords: ['개시', '도전', '기세', '리더'] },
  '申': { element: '금', group: '인신사해', keywords: ['기술', '효율', '전략', '손재주'] },
  '巳': { element: '화', group: '인신사해', keywords: ['집중', '기획', '브랜딩', '흥행'] },
  '亥': { element: '수', group: '인신사해', keywords: ['상상', '연구', '치유', '깊이'] },

  '辰': { element: '토', group: '진술축미', keywords: ['저장', '확장기반', '조율', '큰판'] },
  '戌': { element: '토', group: '진술축미', keywords: ['원칙', '수비', '책임', '의리'] },
  '丑': { element: '토', group: '진술축미', keywords: ['축적', '실무', '인내', '현실'] },
  '未': { element: '토', group: '진술축미', keywords: ['정리', '관계관리', '생활', '타협'] },
};

const ELEMENT_PAIR_TONE: Record<string, { summary: string; strengths: string[]; weaknesses: string[] }> = {
  '목-수': { summary: '생(生)으로 아이디어가 자라나 실행의 씨앗이 된다', strengths: ['학습·기획력', '개척력'], weaknesses: ['머리 과다', '우선순위 흔들림'] },
  '목-금': { summary: '제약과 기준 속에서 성장이 단련된다', strengths: ['기준 수립', '완성도'], weaknesses: ['완고함', '비판 과다'] },
  '목-목': { summary: '성장 기운이 강해 확장과 인연이 빠르다', strengths: ['확장력', '관계 형성'], weaknesses: ['분산', '감정 소모'] },

  '화-목': { summary: '표현과 확장이 강해 리드와 설득이 빠르다', strengths: ['리더십', '표현력'], weaknesses: ['과열', '말이 앞섬'] },
  '화-화': { summary: '에너지가 강해 승부가 빠르고 주목을 받는다', strengths: ['추진력', '대중성'], weaknesses: ['성급', '번아웃'] },
  '화-수': { summary: '뜨거움과 차가움이 공존해 감정 파동이 생기기 쉽다', strengths: ['감각·기획', '위기대응'], weaknesses: ['기복', '극단화'] },

  '토-화': { summary: '구조 안에서 성과를 내며 책임이 성취로 이어진다', strengths: ['성과관리', '책임감'], weaknesses: ['통제욕', '완벽주의'] },
  '토-토': { summary: '현실성과 지속력이 강해 축적에 강하다', strengths: ['꾸준함', '자산 축적'], weaknesses: ['고집', '변화 둔감'] },
  '토-수': { summary: '흐름을 담아내는 그릇이라 정보·돈의 관리에 강하다', strengths: ['관리력', '리스크 통제'], weaknesses: ['걱정 과다', '우유부단'] },

  '금-토': { summary: '기준과 구조가 결합해 성과·규율이 뚜렷하다', strengths: ['결단', '운영 능력'], weaknesses: ['차가움', '융통성 부족'] },
  '금-금': { summary: '선별과 완성의 힘이 강해 전문성이 두드러진다', strengths: ['전문성', '정교함'], weaknesses: ['예민', '비판적'] },
  '금-수': { summary: '전략과 정보의 결합으로 기획·협상에 강하다', strengths: ['전략', '협상력'], weaknesses: ['계산적 인상', '거리감'] },

  '수-금': { summary: '정보를 구조화해 성과로 바꾸는 힘이 있다', strengths: ['분석', '기획'], weaknesses: ['냉소', '의심'] },
  '수-수': { summary: '흐름이 강해 이동·변화·학습이 빠르다', strengths: ['적응력', '학습력'], weaknesses: ['산만', '결정 지연'] },
  '수-목': { summary: '지식과 아이디어가 성장으로 이어지는 형상', strengths: ['창의', '성장력'], weaknesses: ['이상 과다', '실행 지연'] },
};

function getTone(stem: string, branch: string) {
  const s = STEM_META[stem];
  const b = BRANCH_META[branch];
  const key = `${s.element}-${b.element}` as keyof typeof ELEMENT_PAIR_TONE;
  return ELEMENT_PAIR_TONE[key] ?? {
    summary: '상생·상극이 섞여 균형이 과제가 되는 형상',
    strengths: ['균형감', '상황대응'],
    weaknesses: ['갈등', '기복'],
  };
}

function buildCommonDetail(ilju: string) {
  const stem = ilju[0];
  const branch = ilju[1];
  const s = STEM_META[stem];
  const b = BRANCH_META[branch];
  const tone = getTone(stem, branch);

  const personality = [
    `${s.keywords[0]} 성향이 강하고 ${s.keywords[1]}에 민감`,
    `${b.keywords[0]}·${b.keywords[1]} 쪽으로 사고가 움직임`,
    `${s.yinyang === '양' ? '겉으로 드러내며' : '속으로 다듬으며'} 판단하는 편`,
    `${b.group} 기질로 ${b.keywords[2]}에 강점`,
  ];

  const strengths = [
    ...tone.strengths,
    `${s.keywords[2]}로 흐름을 만든다`,
    `${b.keywords[3]}를 활용한 성과`,
  ].slice(0, 4);

  const weaknesses = [
    ...tone.weaknesses,
    `${s.yinyang === '양' ? '속도가 과해' : '고민이 길어'} 타이밍을 놓치기 쉬움`,
    `${b.group === '진술축미' ? '고집과 관성' : '변화 욕구'}이 과해질 수 있음`,
  ].slice(0, 4);

  // 직업/재물/관계는 “오행+기질” 기반의 큰 방향만 제시 (사주 전체 구성 없으므로 과단정 금지)
  const career =
    s.element === '목' ? '기획, 교육, 콘텐츠, 인사/조직, 브랜드·마케팅 등 “성장/확장” 축의 일' :
      s.element === '화' ? '영업, PR, 미디어, 리더 역할, 무대/퍼포먼스, 창업 등 “표현/주목” 축의 일' :
        s.element === '토' ? '운영, PM/PO, 관리, 부동산/건설, 재무/회계, 품질 등 “구조/유지” 축의 일' :
          s.element === '금' ? '법/규정, 데이터/분석, 보안, 엔지니어링, 금융, 평가/감사 등 “기준/정밀” 축의 일' :
            '리서치, 기획, 무역, 물류, IT, 커뮤니케이션 등 “정보/흐름” 축의 일';

  const wealth =
    b.group === '진술축미'
      ? '축적 운이 비교적 강해 꾸준한 저축·자산화에 유리. 다만 보수적으로 굳으면 기회 손실.'
      : b.group === '인신사해'
        ? '기회와 변동이 함께 와서 “타이밍”이 관건. 수입원 다변화에 유리하나 리스크 관리 필요.'
        : '흐름이 빠르며 씀씀이도 함께 커질 수 있어 “관리 규칙”을 만들면 안정적.';

  const relationships =
    b.group === '자오묘유'
      ? '사교·교류가 비교적 활발. 감정 온도가 올라갈 때 말이 거칠어지지 않게 조절이 관건.'
      : b.group === '인신사해'
        ? '자유도와 성장 욕구가 커서 “공간/목표”를 존중하는 관계가 잘 맞음. 구속은 갈등 요인.'
        : '의리·책임을 중시해 오래 가는 관계를 선호. 다만 고집이 세면 소통이 막힐 수 있음.';

  const summary = `${stem}${branch} 일주는 ${tone.summary}. (${s.element}/${b.element} 기운의 결합)`;

  return { summary, personality, strengths, weaknesses, career, wealth, relationships };
}

function genderize(common: ReturnType<typeof buildCommonDetail>, gender: 'male' | 'female'): IljuDetail {
  // 성별은 “성향 자체”를 바꾸기보다, 사이트 문구상 “역할 기대/관계 표현”만 미세 조정
  if (gender === 'male') {
    return {
      ...common,
      summary: common.summary.replace('형상', '기운'),
      relationships:
        common.relationships +
        ' 남성은 책임·기준을 앞세워 관계를 안정시키려는 경향이 있어, 감정 표현을 의식적으로 늘리면 좋음.',
    };
  }
  return {
    ...common,
    summary: common.summary.replace('형상', '결'),
    relationships:
      common.relationships +
      ' 여성은 관계의 디테일(배려·말투·약속)에 민감한 편이라, 기대치를 말로 합의하면 갈등이 줄어듦.',
  };
}

/**
 * =========================
 * 3) 기본 생성 + 오버라이드(첨삭)
 * =========================
 */
const OVERRIDES: Partial<Record<string, Partial<IljuAnalysis>>> = {
  /**
   * ✅ 甲子 첨삭 포인트
   * - 甲(양목) : 개척/원칙/직진
   * - 子(수)  : 정보/두뇌/시작
   * - 목-수 : 상생(수생목) → 성장/학습/기획 강점
   * - 단점은 “생각 과다/결정 지연/관계에서 자존심” 쪽이 더 명리스럽게 맞음
   */
  '甲子': {
    male: {
      summary: '수(水)가 목(木)을 살려 큰 구상을 현실로 키우는 타입. 원칙과 개척성이 강함',
      personality: [
        '큰 그림을 먼저 그리고 방법을 찾아가는 편',
        '정보·공부·기획에 강하고 판단 속도가 빠름',
        '원칙을 지키려 하며 기준이 분명',
        '겉은 강해 보여도 내면은 예민하고 생각이 많음',
      ],
      strengths: [
        '학습·분석을 실행으로 연결하는 힘',
        '개척/리딩 능력, 기획력',
        '위기에서 전략을 세워 돌파',
        '신뢰를 얻는 일관된 기준',
      ],
      weaknesses: [
        '생각이 많아 결정을 늦추는 시기',
        '자존심이 상하면 말이 단단해짐',
        '일/목표에 몰입해 감정 케어가 뒤로 밀림',
        '완벽한 설계 후 움직이려는 경향',
      ],
      career: '전략/기획, 연구, 교육, 데이터 기반 직무, PM/PO, 컨설팅, 창업(아이템 기획형)',
      wealth: '지식·전문성으로 벌어 축적하는 흐름. “정보=돈” 구조에 강하나, 과감한 베팅은 손실 위험.',
      relationships: '진지하고 오래 가는 관계 선호. 존중받는 대화가 필요하며, 감정 표현을 의식적으로 늘리면 안정적.',
    },
    female: {
      summary: '학습·감각이 빠르고 독립성이 강한 결. 사람을 넓게 만나되 기준은 분명함',
      personality: [
        '호기심이 강하고 배움이 빠름',
        '관계는 부드럽게 풀되 핵심 기준은 지킴',
        '자기 주도성이 강하고 독립적인 선택을 선호',
        '감정의 파동이 있을 때 혼자 정리하려 함',
      ],
      strengths: [
        '기획·조율·커뮤니케이션 균형',
        '센스 있는 판단과 빠른 학습',
        '문제 해결을 구조화하는 능력',
        '신뢰감 있는 원칙',
      ],
      weaknesses: [
        '예민할 때 거리두기가 과해질 수 있음',
        '기대치가 높아 실망이 빠를 수 있음',
        '머리로 정리하느라 감정을 뒤로 미룸',
        '완벽주의로 자기 압박',
      ],
      career: '기획/브랜딩, 교육/코칭, 디자인/콘텐츠, 리서치, PM, 커뮤니티/HR',
      wealth: '관리형 재물운. 기록·규칙을 만들면 빠르게 안정화. 지식/콘텐츠/자격 기반 수익에 유리.',
      relationships: '자유와 신뢰가 핵심. 약속·말투·디테일 합의를 잘하면 결혼/동거 관계도 안정적.',
    },
  },

  /**
   * ✅ 戊戌 첨삭 포인트
   * - 戊(양토): 버팀/책임/구조
   * - 戌(토): 원칙/수비/의리(건조)
   * - 토-토: 축적/보수/지속
   */
  '戊戌': {
    male: {
      summary: '원칙과 책임으로 버티는 “산(山)” 타입. 한번 정한 기준을 쉽게 꺾지 않음',
      personality: [
        '말보다 행동으로 신뢰를 쌓는 편',
        '원칙과 책임감이 강하고 의리를 중시',
        '겉으로는 무덤덤하지만 속은 뜨거움',
        '내 편/네 편이 명확해질 때가 있음',
      ],
      strengths: [
        '장기전·누적 성과에 강함',
        '위기에서 중심 잡는 안정감',
        '운영/관리/조직화 능력',
        '재정·자산을 모으는 힘',
      ],
      weaknesses: [
        '융통성 부족, 변화에 둔감해지기 쉬움',
        '고집이 강해 소통이 막힐 수 있음',
        '감정표현이 적어 오해를 부름',
        '혼자 짊어지고 번아웃',
      ],
      career: '운영/관리, 공공/행정, 건설/부동산, 품질/안전, 재무, 조직 리더(현장형)',
      wealth: '축적에 강한 편. 부동산/장기투자/현금흐름 설계가 잘 맞음. 다만 보수 과다로 기회 손실 주의.',
      relationships: '책임감으로 가정을 지키는 스타일. 표현이 적어도 “약속/시간”으로 애정을 보여주면 좋음.',
    },
    female: {
      summary: '현실 감각과 책임이 강한 결. 안정된 기반 위에서 관계와 일을 함께 세움',
      personality: [
        '실리적이고 생활 감각이 좋음',
        '약속과 규칙을 중시',
        '한번 마음 주면 오래 가는 편',
        '감정 기복은 적지만 쌓이면 단단해짐',
      ],
      strengths: [
        '관리·살림·재정 운영 능력',
        '신뢰를 주는 꾸준함',
        '조직/가정에서 중심 잡는 힘',
        '현실적인 문제 해결',
      ],
      weaknesses: [
        '완고해지면 타협이 어려움',
        '감정을 뒤로 미루다 폭발할 수 있음',
        '상대의 속도를 따라가기 어렵다고 느낄 수 있음',
        '자기 기준이 강해 피로감 유발',
      ],
      career: '재무/회계, 운영/관리, 공공/교육 실무, 부동산, 품질/안전, PM(운영형)',
      wealth: '적립·축적 운이 강함. “지출 규칙+장기 플랜”에 특화. 단, 인간관계 비용으로 새는 흐름을 점검.',
      relationships: '책임감 있는 파트너와 궁합이 좋음. 기대치를 말로 합의하면 결혼 생활이 매우 안정적.',
    },
  },

  /**
   * ✅ 丙午 첨삭 포인트
   * - 丙(양화): 태양/표현/확장
   * - 午(화): 무대/승부/속도
   * - 화-화: 에너지 과다 → 성급·과열·지출 증가
   */
  '丙午': {
    male: {
      summary: '강한 화(火)의 기세로 앞에서 끌고 가는 리더형. 주목과 성과를 함께 노림',
      personality: [
        '표현이 빠르고 존재감이 큼',
        '승부욕과 추진력이 강함',
        '정의감·자존감이 강한 편',
        '분위기를 주도하고 사람을 모음',
      ],
      strengths: [
        '대중 설득력, 리딩',
        '빠른 실행과 결단',
        '위기에서 기세로 돌파',
        '네트워크 확장',
      ],
      weaknesses: [
        '성급함, 말이 앞서 갈등 유발',
        '감정이 올라오면 직설이 강해짐',
        '지출/투자 타이밍이 충동적일 수 있음',
        '과로·번아웃',
      ],
      career: '영업/사업, 리더 포지션, 마케팅/PR, 방송/무대, 스포츠, 창업(확장형)',
      wealth: '크게 벌 기회가 있으나 크게 쓰는 흐름도 동반. “예산·상한선”을 두면 안정적.',
      relationships: '연애/결혼 모두 주도권이 강해질 수 있음. 상대의 속도를 존중하면 매력이 오래 감.',
    },
    female: {
      summary: '화려한 표현력과 추진력이 강한 결. 사랑도 일도 “확장”으로 풀어감',
      personality: [
        '사교적이고 존재감이 큼',
        '감정 표현이 솔직하고 빠름',
        '목표를 정하면 밀어붙임',
        '칭찬과 인정에 민감',
      ],
      strengths: [
        '사람을 끌어당기는 매력',
        '커뮤니케이션·홍보 감각',
        '결단과 추진력',
        '리더십',
      ],
      weaknesses: [
        '감정 과열로 말실수',
        '관심이 분산되면 지속력이 떨어질 수 있음',
        '허영/과소비 유혹',
        '휴식 부족',
      ],
      career: '브랜딩/마케팅, 세일즈, 서비스/뷰티, 미디어/콘텐츠, 공연/이벤트, 리더 직무',
      wealth: '유입도 좋고 기회도 많음. 다만 소비가 함께 커지기 쉬워 “자동저축/분리계좌”가 효과적.',
      relationships: '연애가 빠르게 진행될 수 있음. 약속·경계(돈/시간)를 합의하면 안정적이고 오래 감.',
    },
  },

  /**
   * ✅ 壬子 첨삭 포인트
   * - 壬(양수): 큰물/확장/이동/기회
   * - 子(수): 정보/두뇌/시작
   * - 수-수: 학습·적응·변화 강, 산만/결정 지연 주의
   */
  '壬子': {
    male: {
      summary: '정보와 기회를 빨아들이는 큰 물(水)의 결. 이동·확장·학습이 강한 타입',
      personality: [
        '두뇌 회전이 빠르고 정보 수집을 즐김',
        '변화에 강하고 환경 적응이 뛰어남',
        '한 번 확신이 오면 과감히 움직임',
        '감정은 겉보다 속에서 크게 출렁일 수 있음',
      ],
      strengths: [
        '학습력·응용력',
        '네트워킹과 확장성',
        '기획·협상 감각',
        '위기에서 탈출구를 찾는 능력',
      ],
      weaknesses: [
        '선택지가 많아 결정이 늦어질 수 있음',
        '집중이 분산되면 결과가 얕아짐',
        '감정 기복이 수면 아래에서 커짐',
        '관계에서 거리감이 생기기 쉬움',
      ],
      career: '기획/전략, 무역/글로벌, IT/데이터, 컨설팅, 교육, 미디어, 영업(정보형)',
      wealth: '흐름형 재물운. 다변화에 유리하지만 “분산=누수”가 되지 않게 계좌/투자 구조화가 필요.',
      relationships: '자유·성장을 존중하는 관계가 맞음. 구속이 강하면 이탈 충동이 생길 수 있음.',
    },
    female: {
      summary: '센스와 직관이 빠르고 변화에 강한 결. 사람·정보·기회를 연결해 성과를 냄',
      personality: [
        '관찰력과 직감이 좋음',
        '새로운 환경에서 빠르게 자리 잡음',
        '관계 폭이 넓어지기 쉬움',
        '감정이 쌓이면 혼자 정리하려는 편',
      ],
      strengths: [
        '커뮤니케이션·중개 능력',
        '학습/기획/응용',
        '변화 관리',
        '감각적인 판단',
      ],
      weaknesses: [
        '산만해지면 지속력이 떨어짐',
        '결정 지연/미루기',
        '연애에서 애매한 거리두기',
        '감정 누수(걱정 과다)',
      ],
      career: '콘텐츠/마케팅, 기획, 디자인, 글로벌/무역, IT/프로덕트, 교육/코칭, 서비스',
      wealth: '기회가 넓은 만큼 관리가 핵심. “고정저축+실험예산”처럼 분리하면 재물운이 안정됨.',
      relationships: '대화가 잘 통하는 파트너와 궁합이 좋음. 기대치·경계를 말로 합의하면 오래 감.',
    },
  },

  /**
   * ✅ 庚申 첨삭 포인트
   * - 庚(양금): 결단/개혁/정면
   * - 申(금): 기술/효율/전략
   * - 금-금: 전문성/정교, 예민/비판 주의
   */
  '庚申': {
    male: {
      summary: '기준과 효율로 승부하는 강금(金)의 결. 결단·전략·기술 적성이 강함',
      personality: [
        '판단이 빠르고 정면 돌파를 선호',
        '기술·도구·시스템에 강함',
        '불필요한 감정을 걷어내고 효율을 택함',
        '자기 기준이 뚜렷해 타협이 어려울 때가 있음',
      ],
      strengths: [
        '결단력·추진력',
        '문제 해결(기술/시스템화)',
        '위기에서 냉정함',
        '성과를 숫자로 만들 능력',
      ],
      weaknesses: [
        '말이 차갑게 들릴 수 있음',
        '비판이 늘면 관계가 경직',
        '완고함/권위적으로 보일 수 있음',
        '휴식 없이 몰입하면 몸이 먼저 반응',
      ],
      career: '엔지니어링/개발, 보안, 데이터, 금융, 운영 최적화, 군/경/조직관리, 창업(기술형)',
      wealth: '성과형 재물운. 전문성으로 단가를 올리기 좋음. 다만 “올인” 성향은 리스크 관리가 필요.',
      relationships: '존중과 신뢰가 핵심. 감정 표현을 의식적으로 늘리면 “차가움” 인상이 크게 완화됨.',
    },
    female: {
      summary: '선별과 완성도가 강한 금(金)의 결. 커리어·기준·품질을 중시하는 타입',
      personality: [
        '취향과 기준이 뚜렷함',
        '일 처리에서 디테일/품질을 놓치지 않음',
        '감정은 절제하되 속으로는 예민할 수 있음',
        '관계에서도 “약속/원칙”을 중시',
      ],
      strengths: [
        '전문성·정교함',
        '리스크 감지/관리',
        '자기관리와 운영 능력',
        '문제의 핵심을 빠르게 찌름',
      ],
      weaknesses: [
        '완벽주의로 피로 누적',
        '상대의 실수를 오래 기억하기 쉬움',
        '표현이 적어 오해가 생김',
        '타협이 늦어질 수 있음',
      ],
      career: '법/규정, 데이터/분석, 금융, 보안, QA/품질, 디자인(고급 취향), 운영',
      wealth: '안정형+성과형. ‘분석→선별→집행’ 루틴이 맞음. 감정 소비(관계 스트레스)가 지출로 번질 수 있어 주의.',
      relationships: '실속 있고 신뢰 가능한 파트너 선호. 기대치를 말로 정리하면 결혼 생활이 매우 안정적.',
    },
  },
};

function buildIljuAnalysis(ilju: string): IljuAnalysis {
  const common = buildCommonDetail(ilju);
  const base: IljuAnalysis = {
    ilju,
    male: genderize(common, 'male'),
    female: genderize(common, 'female'),
  };

  // 오버라이드가 있으면 병합(첨삭 반영)
  const ov = OVERRIDES[ilju];
  if (!ov) return base;
  return {
    ilju,
    male: { ...base.male, ...(ov?.male ?? {}) },
    female: { ...base.female, ...(ov?.female ?? {}) },
  };
}

/**
 * =========================
 * 4) 최종: 일주 데이터베이스 (60개 × 남/여)
 * =========================
 */
export const ILJU_DATA: IljuAnalysis[] = ILJU_60.map(buildIljuAnalysis);


// 일주 조회 함수
export function getIljuAnalysis(ilju: string, gender: 'male' | 'female'): IljuDetail | null {
  const data = ILJU_DATA.find(item => item.ilju === ilju);
  if (!data) return null;
  return data[gender];
}
